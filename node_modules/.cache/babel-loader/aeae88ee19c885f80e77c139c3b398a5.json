{"ast":null,"code":"import { WINDOW_REGIONS } from '../constants';\n\nclass WindowManagerService$ {\n  constructor() {\n    this.launched = [];\n    this.sidebarOpened = !1;\n    this.index = 0;\n    window.addEventListener('unload', () => this.exit());\n  }\n\n  quickSize(re, src) {\n    const regex = /embed\\/(\\d+)\\/(\\d+)\\/(\\d+)\\/(\\d+)/.exec(src);\n    let out = src;\n\n    if (regex) {\n      const str = `embed/${regex[1]}/${regex[2]}/${re.width}/${re.height}`;\n      out = out.replace(regex[0], str);\n    }\n\n    return out;\n  }\n\n  region(video) {\n    let index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const re = WINDOW_REGIONS[index % WINDOW_REGIONS.length];\n    re.on = !0;\n    re.src = video.image;\n    return window.open(this.quickSize(re, video.src), `region_${index}`, `width=${re.width},height=${re.height},toolbar=0,location=0,left=${re.x},top=${re.y}`);\n  }\n\n  focus() {\n    this.launched.sort((a, b) => a.index < b.index ? 1 : -1).map(app => {\n      var _app$window;\n\n      return (_app$window = app.window) === null || _app$window === void 0 ? void 0 : _app$window.focus();\n    });\n  }\n\n  launch(video) {\n    let index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.launched.push({\n      video,\n      index,\n      window: this.region(video, index)\n    });\n    this.index++; // VideoPersistService.add(video);\n\n    setTimeout(() => this.focus(), 99);\n  }\n\n  visited(video) {\n    return !!this.launched.filter(f => f.video.ID === video.ID).length;\n  }\n\n  exit() {\n    this.launched.map(f => f.window.close());\n    this.launched = [];\n  }\n\n  peek() {\n    return !!this.launched.length;\n  }\n\n  jav(item) {\n    let re = /([a-z|A-Z]+-\\d+)/.exec(item.title);\n\n    if (re) {\n      window.open(this.javLibrarySearchLink(re[1]));\n      return;\n    }\n\n    window.open(item.URL);\n  }\n\n  googlePhotoLink(title) {\n    return `https://www.google.com/search?q=${title.replace(/\\s/g, '+')} xxx&source=lnms&tbm=isch`;\n  }\n\n  javLibrarySearchLink(key) {\n    return `http://www.javlibrary.com/en/vl_searchbyid.php?keyword=${key}`;\n  }\n\n  javLibraryAutoLink(items) {\n    return `http://www.javlibrary.com/en/#find${items.join('/')}`;\n  }\n\n  javdoeSearchLink(items, href) {\n    const address = [`https://javdoe.tv#${items.join('/')}`];\n    if (href) address.push(href);\n    return address.join('^');\n  }\n\n}\n\nconst WindowManagerService = new WindowManagerService$();\nexport { WindowManagerService };","map":{"version":3,"sources":["/home/miltonejones/projects/react-sploosh-amplify/src/services/WindowManager.js"],"names":["WINDOW_REGIONS","WindowManagerService$","constructor","launched","sidebarOpened","index","window","addEventListener","exit","quickSize","re","src","regex","exec","out","str","width","height","replace","region","video","length","on","image","open","x","y","focus","sort","a","b","map","app","launch","push","setTimeout","visited","filter","f","ID","close","peek","jav","item","title","javLibrarySearchLink","URL","googlePhotoLink","key","javLibraryAutoLink","items","join","javdoeSearchLink","href","address","WindowManagerService"],"mappings":"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","sourcesContent":["import { WINDOW_REGIONS } from '../constants';\r\n\r\nclass WindowManagerService$ {\r\n  launched = [];\r\n  sidebarOpened = !1;\r\n  index = 0;\r\n  constructor() {\r\n    window.addEventListener('unload', () => this.exit());\r\n  }\r\n  quickSize(re, src) {\r\n    const regex = /embed\\/(\\d+)\\/(\\d+)\\/(\\d+)\\/(\\d+)/.exec(src);\r\n    let out = src;\r\n    if (regex) {\r\n      const str = `embed/${regex[1]}/${regex[2]}/${re.width}/${re.height}`;\r\n      out = out.replace(regex[0], str);\r\n    }\r\n    return out;\r\n  }\r\n  region(video, index = 0) {\r\n    const re = WINDOW_REGIONS[index % WINDOW_REGIONS.length];\r\n    re.on = !0;\r\n    re.src = video.image;\r\n    return window.open(\r\n      this.quickSize(re, video.src),\r\n      `region_${index}`,\r\n      `width=${re.width},height=${re.height},toolbar=0,location=0,left=${re.x},top=${re.y}`\r\n    );\r\n  }\r\n  focus() {\r\n    this.launched\r\n      .sort((a, b) => (a.index < b.index ? 1 : -1))\r\n      .map((app) => app.window?.focus());\r\n  }\r\n  launch(video, index = 0) {\r\n    this.launched.push({\r\n      video,\r\n      index,\r\n      window: this.region(video, index),\r\n    });\r\n    this.index++;\r\n    // VideoPersistService.add(video);\r\n    setTimeout(() => this.focus(), 99);\r\n  }\r\n  visited(video) {\r\n    return !!this.launched.filter((f) => f.video.ID === video.ID).length;\r\n  }\r\n  exit() {\r\n    this.launched.map((f) => f.window.close());\r\n    this.launched = [];\r\n  }\r\n  peek() {\r\n    return !!this.launched.length;\r\n  }\r\n  jav(item) {\r\n    let re = /([a-z|A-Z]+-\\d+)/.exec(item.title);\r\n    if (re) {\r\n      window.open(this.javLibrarySearchLink(re[1]));\r\n      return;\r\n    }\r\n    window.open(item.URL);\r\n  }\r\n  googlePhotoLink(title) {\r\n    return `https://www.google.com/search?q=${title.replace(\r\n      /\\s/g,\r\n      '+'\r\n    )} xxx&source=lnms&tbm=isch`;\r\n  }\r\n  javLibrarySearchLink(key) {\r\n    return `http://www.javlibrary.com/en/vl_searchbyid.php?keyword=${key}`;\r\n  }\r\n  javLibraryAutoLink(items) {\r\n    return `http://www.javlibrary.com/en/#find${items.join('/')}`;\r\n  }\r\n  javdoeSearchLink(items, href) {\r\n    const address = [`https://javdoe.tv#${items.join('/')}`];\r\n    if (href) address.push(href);\r\n    return address.join('^');\r\n  }\r\n}\r\nconst WindowManagerService = new WindowManagerService$();\r\nexport { WindowManagerService };\r\n"]},"metadata":{},"sourceType":"module"}